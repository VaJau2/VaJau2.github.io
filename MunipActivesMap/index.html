<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ActivesMap</title>
  <link rel="stylesheet" type="text/css" href="style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
   integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
   crossorigin=""/>
   <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
  integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
  crossorigin=""></script>
  <script src="geoJSON/NonLivingBuildsReestr.js"></script>
  <script src="geoJSON/FactoryReestr.js"></script>
  <script src="geoJSON/EducationReestr.js"></script>
</head>
<body>
   <div id="mapid"></div>
   <div class = "panel">
     <div class="panelElementTop">
 		    <input type="text" size="20" id="FindTextBox" class="findTextBox">
 		    <input type="submit" value="Поиск" id="FindButton">
    </div>
    <div class="panelElementDown">
      <select multiple id="FilterSelect">
        <option>Реестр Муниципальных Земель (регионы)</option>
        <option>Реестр Муниципальных Земель (здания)</option>
        <option>Жилищный фонд и нежилые помещения</option>
        <option>Реестр предприятий и организаций</option>
        <option>Реестр учреждений образования</option>
      </select>
      <input type="submit" value="Фильтр" id="FilterButton">
    </div>
 	</div>
  <div class="askOnePoint" id="askOnePoint">
    <p class="askOnePointHeader">Выберите один из активов</p>
    <select multiple id="askOnePointSelect">
      <option>Актив 1</option>
      <option>Актив 2</option>
    </select>
    <input type="submit" value="Выбрать" id="askOnePointButton">
  </div>
   <script src="Buttons.js"></script>
   <script>
     var mapLayers = [];

     var map = L.map('mapid').setView([51.505, -0.09], 13);
     L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
   		maxZoom: 18,
   		attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
   			'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
   			'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
   		id: 'mapbox.light'
   	}).addTo(map);

    //функция, которая загружает всякие штуки с точками на карте
    function onEachFeature(feature, layer) {
      var popupContent = buildPopupText(feature);
      var popup = layer.bindPopup(popupContent);
    }

    mapLayers.push(L.tileLayer.wms("http://pkk5.rosreestr.ru/arcgis/services/Cadastre/CadastreWMS/MapServer/WMSServer", {
      layers: "8",
      format: 'image/png',
      transparent: true,
      attribution: "Публичная кадастровая карта росреестра"
    }).addTo(map));

    mapLayers.push(L.tileLayer.wms("http://pkk5.rosreestr.ru/arcgis/services/Cadastre/CadastreWMS/MapServer/WMSServer", {
      layers: "9",
      format: 'image/png',
      transparent: true,
    }).addTo(map));

    //загружаем геожсон файл отдельно
    mapLayers.push(L.geoJSON(NonLivingBuildsReestrGeoJSON,
      {
        onEachFeature: onEachFeature,
        style: function (feature) {
          return {color: '#3388ff'};
		    }
      }).addTo(map));

    mapLayers.push(L.geoJSON(FactoryReestrGeoJSON,
      {
        onEachFeature: onEachFeature,
        style: function (feature) {
          return {color: '#AA0551'};
		    }
      }).addTo(map));

      mapLayers.push(L.geoJSON(EducationReestrGeoJSON,
        {
          onEachFeature: onEachFeature,
          style: function (feature) {
            return {color: '#42AB42'};
  		    }
        }).addTo(map));


    map.setView(L.latLng([53.694503,55.059084]));
   </script>
</body>
</html>
